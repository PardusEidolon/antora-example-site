name: fly launch

on: 
#   push:
#     branches:
#       - main
  # pull_request:
  workflow_dispatch

env:
  FLY_API_TOKEN: ${{ secrets.FLY_API_TOKEN }}
  FLY_REGION: syd
  FLY_ORG: yumiai

  
jobs:
  fly_deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3
      - name: Antora Site
        uses: kameshsampath/antora-site-action@v0.2.4
        with:
          antora_playbook: playbook.yml
      # - name: push to branch
      # - uses: s0/git-publish-subdir-action@develop
      #    env:
      #       REPO: self
      #       BRANCH: release
      #       FOLDER: build
      #       GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      - name: Deploy
        id: deploy
        uses: brentd/fly-staging-app@v1